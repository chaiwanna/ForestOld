{"remainingRequest":"/Users/konlawat/Desktop/project/Frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/konlawat/Desktop/project/Frontend/src/views/RegisterFrost.vue?vue&type=style&index=0&id=4f7c44d2&scoped=true&lang=css&","dependencies":[{"path":"/Users/konlawat/Desktop/project/Frontend/src/views/RegisterFrost.vue","mtime":1589017612344},{"path":"/Users/konlawat/Desktop/project/Frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/konlawat/Desktop/project/Frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/konlawat/Desktop/project/Frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/konlawat/Desktop/project/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/konlawat/Desktop/project/Frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5uYW1lLXN5c3RlbSB7CiAgd2lkdGg6IDgwJTsKICBkaXNwbGF5OiBibG9jazsKICBtYXJnaW46IGF1dG87CiAgbWFyZ2luLXRvcDogMTUlOwogIG1hcmdpbi1ib3R0b206IDQwcHg7Cn0KaDEgewogIGZvbnQtc2l6ZTogMThweDsKICBmb250LXdlaWdodDogNjAwOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQouY2FyZC1oZWFkZXIgewogIGxldHRlci1zcGFjaW5nOiA1cHg7Cn0KLmNhcmQtYm9keSB7CiAgcGFkZGluZy1sZWZ0OiA1JTsKICBwYWRkaW5nLXJpZ2h0OiA1JTsKfQouYnRuIHsKICBtYXJnaW4tdG9wOiAzMHB4Owp9Cg=="},{"version":3,"sources":["RegisterFrost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RegisterFrost.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"register container\">\n    <div class=\"row\">\n      <div class=\"col-md-3\"></div>\n      <div class=\"col-md-6\">\n        <h1 class=\"name-system\">ระบบลงทะเบียนผู้เข้าใช้พื้นที่เขตรักษาพันธุ์สัตว์ป่าเวียงลอ</h1>\n        <div class=\"card\">\n          <h1 class=\"card-header\">แจ้งการเข้าใช้พื้นที่ป่าไม้</h1>\n          <div class=\"card-body\">\n            <form @submit.prevent=\"onSubmit()\">\n              <div class=\"form-group row\">\n                <label for=\"inputmobile\" class=\"col-sm-6 col-form-label\">โซนบริเวณป่าไม้ที่จะเข้า :</label>\n                <div class=\"col-sm-6\">\n                  <input type=\"text\" v-model.trim=\"form.TEL\" class=\"form-control\" />\n                </div>\n              </div>\n               <div class=\"form-group row\">\n                <label for=\"inputprovince\" class=\"col-sm-6 col-form-label\">วัตถุประสงค์ในการเข้าป่า :</label>\n                <div class=\"col-sm-6\">\n                  <select v-model=\"form.selected_provinces\" class=\"form-control\">\n                    <option\n                      v-for=\"item in provinces\"\n                      :key=\"item.id\"\n                      v-bind:value=\"item.id\"\n                    >{{item.name_in_thai}}</option>\n                  </select>\n                </div>\n              </div>\n            \n\n              <div class=\"forn-group\">\n                <button type=\"submit\" class=\"btn btn-success btn-block\">ลงทะเบียน</button>\n                <button  type=\"button\" @click=\"onRedirectToHome()\" class=\"btn btn-secondary btn-block\">ยกเลิก</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-3\"></div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      form: {\n        TEL: \"\",\n       \n      },\n     \n    };\n  },\n  methods: {\n    //บันทึกข้อมูลลงทะเบียน\n    findDataById(arr, id) {\n      const index = arr.findIndex(x => x.id === id);\n      console.log(\"inde \" + index);\n\n      return arr[index][\"name_in_thai\"];\n    },\n    updateAddress() {\n      this.form.ADDRESS =\n        this.form.NUMHOME+\n        this.form.NUMMOO+\n        this.findDataById(this.provinces, this.form.selected_provinces) +\n        this.findDataById(this.districts, this.form.selected_districts) +\n        this.findDataById(this.subdistricts, this.form.selected_subdistricts)+\n        this.form.ZIPCODE;\n    },\n    onSubmit() {\n      const response = axios\n        .post(\"api/account/register\", this.form)\n        .then(response =>this.onReset)\n        .catch(err => {\n          console.log(err.response.data);\n        });\n    },\n    onReset(){\n      this.onSubmit.rest();\n      this.form= {\n       \n      }\n    },\n    //ไปหน้าเข้าสู่ระบบ\n    onRedirectToHome(){\n      this.$router.push(\"/\");\n      \n\n    },\n    getProvinces() {\n      const axios = require(\"axios\");\n      axios\n        .get(\"http://localhost:3000/api/country/provinces\")\n        .then(response => {\n          this.provinces = this.provinces.concat(response.data);\n          // console.log(this.provinces);\n        });\n    },\n    getDistricts(id) {\n      const axios = require(\"axios\");\n      axios\n        .get(\"http://localhost:3000/api/country/districts/\" + id)\n        .then(response => {\n          this.districts = this.districts.concat(response.data);\n          // console.log(this.districts);\n        });\n    },\n    getSubdistricts(id) {\n      const axios = require(\"axios\");\n      axios\n        .get(\"http://localhost:3000/api/country/subdistricts/\" + id)\n        .then(response => {\n          // console.log(response);\n          this.subdistricts = this.subdistricts.concat(response.data);\n          // console.log(this.subdistricts);\n        });\n    }\n  },\n  mounted() {\n    this.getProvinces();\n  },\n  watch: {\n    \"form.selected_provinces\": function(val) {\n      this.districts = [];\n      this.getDistricts(val);\n      this.updateAddress();\n    },\n    \"form.selected_districts\": function(val) {\n      this.subdistricts = [];\n      this.getSubdistricts(val);\n      this.updateAddress();\n    },\n    \"form.selected_subdistricts\": function(val) {\n      this.updateAddress();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.name-system {\n  width: 80%;\n  display: block;\n  margin: auto;\n  margin-top: 15%;\n  margin-bottom: 40px;\n}\nh1 {\n  font-size: 18px;\n  font-weight: 600;\n  text-align: center;\n}\n.card-header {\n  letter-spacing: 5px;\n}\n.card-body {\n  padding-left: 5%;\n  padding-right: 5%;\n}\n.btn {\n  margin-top: 30px;\n}\n</style>"]}]}